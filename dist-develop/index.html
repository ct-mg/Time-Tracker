<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ChurchTools Extension</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
                height: 100vh;
                background: #f5f5f5;
                display: flex;
                flex-direction: column;
            }

            #menu {
                background: #0036b3;
                color: white;
                display: flex;
                align-items: stretch;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                flex-shrink: 0;
            }

            #menu-header {
                padding: 1rem 1.5rem;
                background: #0036b3;
                display: flex;
                flex-direction: column;
                border-right: 1px solid rgba(255,255,255,0.2);
            }

            #menu-header h2 {
                margin: 0;
                font-size: 1rem;
                font-weight: 600;
            }

            #menu-items {
                display: flex;
                flex: 1;
                align-items: stretch;
            }

            .menu-item {
                padding: 1rem 1.5rem;
                cursor: pointer;
                border-right: 1px solid rgba(255,255,255,0.2);
                transition: background 0.2s;
                display: flex;
                flex-direction: column;
                justify-content: center;
                min-width: 200px;
            }

            .menu-item:hover {
                background: rgba(0,0,0,0.1);
            }

            .menu-item.active {
                background: #0060c0;
                box-shadow: inset 0 -3px 0 rgba(255,255,255,0.5);
            }

            .menu-item-primary {
                font-weight: 600;
                font-size: 1rem;
                margin-bottom: 0.25rem;
            }

            .menu-item-secondary {
                font-size: 0.75rem;
                opacity: 0.85;
                line-height: 1.3;
            }

            #content-area {
                flex: 1;
                display: flex;
                flex-direction: column;
                overflow: hidden;
            }

            #app {
                flex: 1;
                overflow: auto;
            }

            /* Toast notification styles */
            .toast {
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                border-radius: 4px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                font-size: 0.95rem;
                font-weight: 500;
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
                max-width: 400px;
            }

            .toast.success {
                background: #d4edda;
                border: 1px solid #c3e6cb;
                color: #155724;
            }

            .toast.error {
                background: #f8d7da;
                border: 1px solid #f5c6cb;
                color: #721c24;
            }

            .toast.info {
                background: #d1ecf1;
                border: 1px solid #bee5eb;
                color: #0c5460;
            }

            .toast.warning {
                background: #fff3cd;
                border: 1px solid #ffeaa7;
                color: #856404;
            }

            @keyframes slideIn {
                from {
                    transform: translateX(400px);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }

            @keyframes slideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(400px);
                    opacity: 0;
                }
            }

            .toast.hiding {
                animation: slideOut 0.3s ease-out forwards;
            }

            /* Test environment styles */
            #test-container {
                flex: 1;
                display: flex;
                overflow: hidden;
            }

            #debug-panel {
                width: 400px;
                background: #f8f9fa;
                border-right: 1px solid #dee2e6;
                overflow-y: auto;
                flex-shrink: 0;
            }

            .debug-section {
                padding: 1rem;
                border-bottom: 1px solid #dee2e6;
            }

            .debug-section h3 {
                margin: 0 0 0.75rem 0;
                font-size: 0.9rem;
                font-weight: 600;
                color: #495057;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }

            .debug-section label {
                display: block;
                margin-bottom: 0.5rem;
                font-size: 0.85rem;
                font-weight: 500;
                color: #6c757d;
            }

            .debug-section textarea {
                width: 100%;
                min-height: 120px;
                padding: 0.5rem;
                border: 1px solid #ced4da;
                border-radius: 4px;
                font-family: 'Courier New', monospace;
                font-size: 0.8rem;
                resize: vertical;
            }

            .debug-section select {
                width: 100%;
                padding: 0.5rem;
                border: 1px solid #ced4da;
                border-radius: 4px;
                font-size: 0.85rem;
                margin-bottom: 0.5rem;
            }

            .debug-section button {
                padding: 0.5rem 1rem;
                background: #007bff;
                color: white;
                border: none;
                border-radius: 4px;
                cursor: pointer;
                font-size: 0.85rem;
                font-weight: 500;
            }

            .debug-section button:hover {
                background: #0056b3;
            }

            .debug-section button:disabled {
                background: #6c757d;
                cursor: not-allowed;
            }

            #event-log {
                max-height: 300px;
                overflow-y: auto;
                background: white;
                border: 1px solid #dee2e6;
                border-radius: 4px;
                padding: 0.5rem;
            }

            .event-log-entry {
                padding: 0.5rem;
                margin-bottom: 0.5rem;
                background: #f8f9fa;
                border-left: 3px solid #007bff;
                border-radius: 4px;
                font-size: 0.8rem;
            }

            .event-log-time {
                color: #6c757d;
                font-weight: 600;
            }

            .event-log-name {
                color: #007bff;
                font-weight: 600;
            }

            .event-log-data {
                margin-top: 0.25rem;
                padding: 0.25rem;
                background: white;
                border-radius: 3px;
                font-family: 'Courier New', monospace;
                white-space: pre-wrap;
                word-break: break-all;
            }

            #preview-container {
                flex: 1;
                display: flex;
                flex-direction: column;
                overflow: hidden;
                background: #e9ecef;
            }

            #preview-controls {
                padding: 0.75rem 1rem;
                background: white;
                border-bottom: 1px solid #dee2e6;
                display: flex;
                align-items: center;
                gap: 1rem;
            }

            #preview-controls label {
                font-size: 0.85rem;
                font-weight: 500;
                color: #6c757d;
            }

            #preview-controls input {
                width: 80px;
                padding: 0.25rem 0.5rem;
                border: 1px solid #ced4da;
                border-radius: 4px;
                font-size: 0.85rem;
            }

            #preview-wrapper {
                flex: 1;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 2rem;
                overflow: auto;
            }

            #preview-frame {
                background: white;
                border: 2px solid #007bff;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                position: relative;
                resize: both;
                overflow: auto;
            }

            #preview-content {
                width: 100%;
                height: 100%;
                overflow: auto;
            }
        </style>
      <script type="module" crossorigin src="/extensions/timetracker/assets/index-CPY7Wky9.js"></script>
    </head>
    <body>
        <div id="menu">
            <div id="menu-header">
                <h2>Extension Test Environment</h2>
                <div>Select an entry point</div>
            </div>
            <div id="menu-items"></div>
        </div>
        <div id="content-area">
            <!-- Full-width app for main/admin -->
            <div id="app" style="display: none;"></div>

            <!-- Test environment for other entry points -->
            <div id="test-container" style="display: none;">
                <div id="debug-panel">
                    <div class="debug-section">
                        <h3>Context Data</h3>
                        <label>Entry Point Data:</label>
                        <textarea id="context-data"></textarea>
                        <button id="reload-btn" style="margin-top: 0.5rem;">Reload Entry Point</button>
                    </div>

                    <div class="debug-section">
                        <h3>Event Bus</h3>
                        <label>Send Event to Extension:</label>
                        <select id="event-select">
                            <option value="">Select an event...</option>
                        </select>
                        <label>Event Data (JSON):</label>
                        <textarea id="event-data" style="min-height: 80px;"></textarea>
                        <button id="send-event-btn" style="margin-top: 0.5rem;">Send Event</button>
                    </div>

                    <div class="debug-section">
                        <h3>Event Log</h3>
                        <button id="clear-log-btn" style="margin-bottom: 0.5rem; background: #6c757d;">Clear Log</button>
                        <div id="event-log"></div>
                    </div>
                </div>

                <div id="preview-container">
                    <div id="preview-controls">
                        <label>Width: <input type="number" id="width-input" value="600" min="200" max="2000"></label>
                        <label>Height: <input type="number" id="height-input" value="400" min="200" max="1200"></label>
                        <button id="apply-size-btn">Apply Size</button>
                    </div>
                    <div id="preview-wrapper">
                        <div id="preview-frame">
                            <div id="preview-content"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
